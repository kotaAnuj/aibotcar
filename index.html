<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Vision Car Controller</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
        }
        h1 {
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 2.2em;
            text-align: center;
        }
        .subtitle {
            color: #718096;
            margin-bottom: 30px;
            text-align: center;
            font-size: 1.1em;
        }
        .grid-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        @media (max-width: 1024px) {
            .grid-layout {
                grid-template-columns: 1fr;
            }
        }
        .panel {
            background: #f7fafc;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
        }
        .panel h3 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        .video-container {
            position: relative;
            background: #000;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
            min-height: 300px;
        }
        #webcam {
            width: 100%;
            height: auto;
            display: block;
        }
        #canvas {
            display: none;
        }
        .video-overlay {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.9em;
            z-index: 10;
        }
        .input-group {
            margin-bottom: 15px;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #4a5568;
        }
        .input-group input, .input-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #cbd5e0;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
        }
        .input-group textarea {
            min-height: 80px;
            resize: vertical;
        }
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }
        .status-item {
            background: #f7fafc;
            padding: 12px;
            border-radius: 8px;
            border: 2px solid #e2e8f0;
            text-align: center;
        }
        .status-label {
            font-size: 0.8em;
            color: #718096;
            margin-bottom: 5px;
        }
        .status-value {
            font-size: 1.2em;
            font-weight: bold;
            color: #2d3748;
        }
        .status-connected { border-color: #48bb78; background: #f0fff4; }
        .status-active { border-color: #4299e1; background: #ebf8ff; }
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin: 5px;
        }
        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .btn-primary { background: #4299e1; color: white; }
        .btn-success { background: #48bb78; color: white; }
        .btn-danger { background: #f56565; color: white; }
        .btn-warning { background: #ed8936; color: white; }
        .btn-secondary { background: #a0aec0; color: white; }
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        .warning-box {
            background: #fffaf0;
            border-left: 4px solid #ed8936;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        .info-box {
            background: #ebf8ff;
            border-left: 4px solid #4299e1;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        #log {
            background: #1a202c;
            color: #cbd5e0;
            padding: 15px;
            border-radius: 8px;
            height: 350px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        .log-entry {
            margin-bottom: 5px;
            padding: 3px 0;
        }
        .log-time { color: #81e6d9; }
        .log-success { color: #68d391; }
        .log-error { color: #fc8181; }
        .log-info { color: #90cdf4; }
        .log-ai { color: #fbb6ce; }
        .log-vision { color: #fbd38d; }
        .ai-thinking {
            background: #edf2f7;
            border: 2px dashed #4299e1;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            text-align: center;
            display: none;
        }
        .ai-thinking.active { display: block; }
        .thinking-animation {
            display: inline-block;
            animation: pulse 1.5s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .manual-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 12px;
            margin: 20px 0;
        }
        .control-btn {
            padding: 20px 10px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .control-btn:active:not(:disabled) { transform: scale(0.95); }
        .control-btn:hover:not(:disabled) { filter: brightness(110%); }
        .forward { grid-column: 2; grid-row: 1; background: #48bb78; color: white; }
        .backward { grid-column: 2; grid-row: 3; background: #48bb78; color: white; }
        .left { grid-column: 1; grid-row: 2; background: #4299e1; color: white; }
        .right { grid-column: 3; grid-row: 2; background: #4299e1; color: white; }
        .stop { grid-column: 2; grid-row: 2; background: #f56565; color: white; font-size: 18px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¤–ğŸ‘ï¸ AI Vision Autonomous Car</h1>
        <p class="subtitle">Direct embedded control with Gemini 2.0 Flash Vision</p>

        <div class="info-box">
            <strong>ğŸ’¡ How This Works:</strong> This page runs DIRECTLY from your ESP32's web server (same domain). 
            AI analyzes camera feed and sends commands every few seconds. No CORS issues!
        </div>

        <div class="grid-layout">
            <div class="panel">
                <h3>ğŸ“¹ AI Vision Feed</h3>
                <div class="video-container">
                    <video id="webcam" autoplay playsinline></video>
                    <canvas id="canvas"></canvas>
                    <div class="video-overlay" id="videoStatus">ğŸ“· Camera Off</div>
                </div>
                <button class="btn btn-primary" onclick="startCamera()">ğŸ“· Start Camera</button>
                <button class="btn btn-secondary" onclick="stopCamera()">â¹ï¸ Stop Camera</button>
                <div class="warning-box">
                    <strong>ğŸ“± Mount Camera:</strong> Attach phone/webcam to car facing forward. AI sees what camera sees!
                </div>
            </div>

            <div class="panel">
                <h3>âš™ï¸ AI Configuration</h3>
                <div class="input-group">
                    <label for="apiKey">ğŸ”‘ Gemini API Key:</label>
                    <input type="password" id="apiKey" placeholder="Get from: aistudio.google.com/apikey">
                    <small style="color: #718096;">Free tier: 15 requests/min</small>
                </div>
                <div class="input-group">
                    <label for="interval">â±ï¸ Decision Interval (ms):</label>
                    <input type="number" id="interval" value="4000" min="2000" max="10000" step="1000">
                    <small style="color: #718096;">4000ms = 15 req/min (free tier safe)</small>
                </div>
                <div class="input-group">
                    <label for="mission">ğŸ¯ AI Mission:</label>
                    <textarea id="mission">You are an autonomous robot car exploring your environment. Navigate safely, avoid obstacles, explore new areas, and move smoothly. Think like a curious intelligent being with a camera as your eyes and wheels as your legs.</textarea>
                </div>
            </div>
        </div>

        <div class="status-grid">
            <div class="status-item" id="cameraStatus">
                <div class="status-label">Camera</div>
                <div class="status-value">ğŸ“· Off</div>
            </div>
            <div class="status-item status-connected">
                <div class="status-label">ESP32 Connection</div>
                <div class="status-value">âœ… Same-Origin</div>
            </div>
            <div class="status-item" id="aiStatusBox">
                <div class="status-label">AI Brain</div>
                <div class="status-value">â¸ï¸ Idle</div>
            </div>
            <div class="status-item">
                <div class="status-label">Commands Sent</div>
                <div class="status-value" id="commandCount">0</div>
            </div>
        </div>

        <div class="ai-thinking" id="thinkingBox">
            <span class="thinking-animation">ğŸ§  AI is analyzing camera view and deciding next move...</span>
        </div>

        <div class="panel">
            <h3>ğŸ® Control Panel</h3>
            <div class="controls">
                <button class="btn btn-success" id="startBtn" onclick="startAutonomous()" disabled>
                    ğŸš€ START AUTONOMOUS MODE
                </button>
                <button class="btn btn-danger" id="stopBtn" onclick="stopAutonomous()" disabled>
                    â¹ï¸ STOP AI
                </button>
                <button class="btn btn-warning" onclick="emergencyStop()">
                    ğŸš¨ EMERGENCY STOP
                </button>
            </div>

            <h3 style="margin-top: 25px; text-align: center;">Manual Override Controls</h3>
            <div class="manual-controls">
                <button class="control-btn forward" onclick="manualCommand('FORWARD')" id="manualForward">
                    â†‘<br><span>FORWARD</span>
                </button>
                <button class="control-btn backward" onclick="manualCommand('BACKWARD')" id="manualBackward">
                    â†“<br><span>BACKWARD</span>
                </button>
                <button class="control-btn left" onclick="manualCommand('LEFT')" id="manualLeft">
                    â†<br><span>LEFT</span>
                </button>
                <button class="control-btn right" onclick="manualCommand('RIGHT')" id="manualRight">
                    â†’<br><span>RIGHT</span>
                </button>
                <button class="control-btn stop" onclick="manualCommand('STOP')" id="manualStop">
                    â¹<br><span>STOP</span>
                </button>
            </div>
            <div style="text-align: center; color: #718096; margin-top: 10px;">
                ğŸ’¡ Use arrow keys (â†‘â†â†“â†’) and spacebar for manual control
            </div>
        </div>

        <div class="panel">
            <h3>ğŸ“Š Activity Log & AI Decisions</h3>
            <div id="log"></div>
        </div>
    </div>

    <script>
        // Global state
        let stream = null;
        let cameraActive = false;
        let autonomousActive = false;
        let autonomousInterval = null;
        let commandCount = 0;
        let conversationHistory = [];
        let lastCommand = '';
        let commandRepeatCount = 0;

        // Logging function
        function log(message, type = 'info') {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            const typeMap = {
                'error': 'log-error',
                'success': 'log-success',
                'ai': 'log-ai',
                'vision': 'log-vision',
                'info': 'log-info'
            };
            
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.innerHTML = `<span class="log-time">[${timestamp}]</span> <span class="${typeMap[type]}">${message}</span>`;
            
            logDiv.appendChild(logEntry);
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(`[${timestamp}] ${message}`);
        }

        // Camera functions
        async function startCamera() {
            try {
                stream = await navigator.mediaDevices.getUserMedia({
                    video: { 
                        facingMode: 'environment',
                        width: { ideal: 640 },
                        height: { ideal: 480 }
                    }
                });
                
                const video = document.getElementById('webcam');
                video.srcObject = stream;
                cameraActive = true;
                
                document.getElementById('videoStatus').textContent = 'ğŸŸ¢ Camera Active';
                document.getElementById('cameraStatus').classList.add('status-active');
                document.getElementById('cameraStatus').querySelector('.status-value').textContent = 'ğŸ“¹ Active';
                
                log('âœ… Camera started - AI can now see!', 'success');
                updateStartButton();
            } catch (error) {
                log(`âŒ Camera error: ${error.message}`, 'error');
                alert('Camera access denied. Please allow camera permissions and try again.');
            }
        }

        function stopCamera() {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                stream = null;
                cameraActive = false;
                
                document.getElementById('videoStatus').textContent = 'ğŸ“· Camera Off';
                document.getElementById('cameraStatus').classList.remove('status-active');
                document.getElementById('cameraStatus').querySelector('.status-value').textContent = 'ğŸ“· Off';
                
                log('Camera stopped', 'info');
                updateStartButton();
            }
        }

        function updateStartButton() {
            const apiKeyInput = document.getElementById('apiKey').value.trim();
            const canStart = cameraActive && apiKeyInput.length > 30;
            document.getElementById('startBtn').disabled = !canStart;
            
            if (!apiKeyInput && cameraActive) {
                log('âš ï¸ Need Gemini API key to start autonomous mode', 'info');
            }
        }

        document.getElementById('apiKey').addEventListener('input', updateStartButton);

        // Capture frame from camera
        async function captureFrame() {
            const video = document.getElementById('webcam');
            const canvas = document.getElementById('canvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            
            const ctx = canvas.getContext('2d');
            ctx.drawImage(video, 0, 0);
            
            return canvas.toDataURL('image/jpeg', 0.7).split(',')[1];
        }

        // AI Decision Making with Vision
        async function getAIDecision() {
            if (!cameraActive) {
                log('âŒ Camera not active - cannot get AI decision', 'error');
                return 'STOP';
            }

            document.getElementById('thinkingBox').classList.add('active');
            
            try {
                const imageBase64 = await captureFrame();
                const mission = document.getElementById('mission').value;
                const recentHistory = conversationHistory.slice(-5).join(' â†’ ');
                
                const prompt = `ğŸ¤– YOU ARE AN AUTONOMOUS ROBOT CAR

YOUR BODY:
- You have TWO WHEELS (differential drive)
- You see through YOUR CAMERA EYES (the image you're analyzing)
- You can execute these PHYSICAL ACTIONS:

COMMANDS YOU CAN DO:
â€¢ FORWARD - Drive your body forward
â€¢ BACKWARD - Drive your body backward
â€¢ LEFT - Rotate your body left (spot turn)
â€¢ RIGHT - Rotate your body right (spot turn)
â€¢ STOP - Stop all movement

YOUR MISSION:
${mission}

YOUR RECENT MEMORY (last actions you took):
${recentHistory || 'Just awakened, no actions yet'}

ğŸ§  INTELLIGENT NAVIGATION RULES:
1. ANALYZE what you SEE in the camera image
2. If you see OPEN SPACE ahead â†’ probably safe to go FORWARD
3. If you see OBSTACLES/WALLS close â†’ turn LEFT or RIGHT to avoid
4. If you're TOO CLOSE to something â†’ BACKWARD first, then turn
5. EXPLORE by varying your movements - don't repeat same action 3+ times in a row
6. Think like an intelligent being exploring its world
7. Move CONFIDENTLY but SAFELY

ğŸ¯ NOW: Look at the camera image. What do you see? What should you do next?

RESPOND WITH ONLY ONE WORD - THE COMMAND:
FORWARD, BACKWARD, LEFT, RIGHT, or STOP`;

                log('ğŸ§  AI analyzing vision feed...', 'vision');
                
                const apiKey = document.getElementById('apiKey').value.trim();
                
                const response = await fetch(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${apiKey}`,
                    {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{
                                parts: [
                                    { text: prompt },
                                    { 
                                        inline_data: {
                                            mime_type: 'image/jpeg',
                                            data: imageBase64
                                        }
                                    }
                                ]
                            }],
                            generationConfig: {
                                temperature: 0.7,
                                maxOutputTokens: 100
                            }
                        })
                    }
                );

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error?.message || `HTTP ${response.status}`);
                }

                const data = await response.json();
                const aiText = data.candidates[0].content.parts[0].text.trim().toUpperCase();
                
                const validCommands = ['FORWARD', 'BACKWARD', 'LEFT', 'RIGHT', 'STOP'];
                let command = validCommands.find(cmd => aiText.includes(cmd));
                
                if (!command) {
                    log(`âš ï¸ AI response unclear: "${aiText.substring(0, 50)}", defaulting to FORWARD`, 'ai');
                    command = 'FORWARD';
                } else {
                    log(`ğŸ¤– AI DECIDED: ${command} | Reasoning: ${aiText.substring(0, 80)}...`, 'ai');
                }
                
                // Track repetition
                if (command === lastCommand) {
                    commandRepeatCount++;
                    if (commandRepeatCount >= 3) {
                        log(`âš ï¸ Repeated ${command} 3 times, forcing variation...`, 'ai');
                        const alternatives = validCommands.filter(c => c !== command && c !== 'STOP');
                        command = alternatives[Math.floor(Math.random() * alternatives.length)];
                        commandRepeatCount = 0;
                    }
                } else {
                    commandRepeatCount = 0;
                }
                lastCommand = command;
                
                conversationHistory.push(command);
                if (conversationHistory.length > 10) conversationHistory.shift();
                
                return command;
                
            } catch (error) {
                log(`âŒ AI ERROR: ${error.message}`, 'error');
                if (error.message.includes('API_KEY_INVALID') || error.message.includes('API key')) {
                    log('ğŸ”‘ INVALID API KEY! Get one from: https://aistudio.google.com/apikey', 'error');
                    stopAutonomous();
                }
                return 'STOP';
            } finally {
                document.getElementById('thinkingBox').classList.remove('active');
            }
        }

        // Send command to ESP32 (same-origin, no CORS issues!)
        async function sendCommand(command) {
            try {
                const response = await fetch('/control', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ command: command })
                });

                if (response.ok) {
                    commandCount++;
                    document.getElementById('commandCount').textContent = commandCount;
                    log(`âœ… Executed: ${command}`, 'success');
                    return true;
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            } catch (error) {
                log(`âŒ Command failed: ${error.message}`, 'error');
                log('Make sure ESP32 is powered on and connected!', 'error');
                return false;
            }
        }

        // Manual control
        async function manualCommand(command) {
            if (autonomousActive) {
                log('âš ï¸ Stop autonomous mode first to use manual control', 'info');
                return;
            }
            await sendCommand(command);
        }

        // Keyboard controls
        document.addEventListener('keydown', (e) => {
            if (autonomousActive) return;
            
            const keyMap = {
                'ArrowUp': 'FORWARD',
                'ArrowDown': 'BACKWARD',
                'ArrowLeft': 'LEFT',
                'ArrowRight': 'RIGHT',
                ' ': 'STOP'
            };
            
            if (keyMap[e.key]) {
                e.preventDefault();
                manualCommand(keyMap[e.key]);
            }
        });

        // Autonomous loop
        async function autonomousLoop() {
            if (!autonomousActive) return;

            try {
                const command = await getAIDecision();
                await sendCommand(command);
            } catch (error) {
                log(`âŒ Autonomous loop error: ${error.message}`, 'error');
            }
        }

        function startAutonomous() {
            if (!cameraActive) {
                alert('Please start the camera first!');
                return;
            }

            const apiKey = document.getElementById('apiKey').value.trim();
            if (!apiKey || apiKey.length < 30) {
                alert('Please enter a valid Gemini API key!');
                return;
            }

            const interval = parseInt(document.getElementById('interval').value);
            
            autonomousActive = true;
            conversationHistory = [];
            commandCount = 0;
            lastCommand = '';
            commandRepeatCount = 0;
            
            // Disable manual controls
            ['manualForward', 'manualBackward', 'manualLeft', 'manualRight', 'manualStop'].forEach(id => {
                document.getElementById(id).disabled = true;
            });
            
            document.getElementById('aiStatusBox').classList.add('status-active');
            document.getElementById('aiStatusBox').querySelector('.status-value').textContent = 'ğŸ¤– DRIVING';
            document.getElementById('startBtn').disabled = true;
            document.getElementById('stopBtn').disabled = false;
            
            log('ğŸš€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'success');
            log('ğŸš€ AUTONOMOUS MODE ACTIVATED!', 'success');
            log('ğŸš€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'success');
            log(`ğŸ¯ Mission: ${document.getElementById('mission').value.substring(0, 100)}...`, 'info');
            log(`â±ï¸ AI will decide every ${interval}ms (${Math.floor(60000/interval)} decisions/minute)`, 'info');
            log('ğŸ“¹ Camera feed being analyzed in real-time', 'vision');
            
            // Start autonomous control
            autonomousLoop();
            autonomousInterval = setInterval(autonomousLoop, interval);
        }

        function stopAutonomous() {
            autonomousActive = false;
            if (autonomousInterval) {
                clearInterval(autonomousInterval);
                autonomousInterval = null;
            }
            
            // Re-enable manual controls
            ['manualForward', 'manualBackward', 'manualLeft', 'manualRight', 'manualStop'].forEach(id => {
                document.getElementById(id).disabled = false;
            });
            
            document.getElementById('aiStatusBox').classList.remove('status-active');
            document.getElementById('aiStatusBox').querySelector('.status-value').textContent = 'â¸ï¸ Idle';
            document.getElementById('startBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
            
            sendCommand('STOP');
            log('â¹ï¸ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
            log('â¹ï¸ Autonomous mode stopped - Manual control enabled', 'info');
            log('â¹ï¸ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
        }

        async function emergencyStop() {
            log('ğŸš¨ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'error');
            log('ğŸš¨ EMERGENCY STOP ACTIVATED!', 'error');
            log('ğŸš¨ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'error');
            stopAutonomous();
            await sendCommand('STOP');
            await sendCommand('STOP');
            await sendCommand('STOP');
        }

        // Initialize
        log('ğŸ‘ï¸ğŸ¤– Vision-Based AI Car Controller Ready!', 'success');
        log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
        log('âœ… Running from ESP32 web server (no CORS issues)', 'success');
        log('', 'info');
        log('ğŸ“‹ SETUP STEPS:', 'info');
        log('1ï¸âƒ£ Get Gemini API key: https://aistudio.google.com/apikey', 'info');
        log('2ï¸âƒ£ Mount camera on car (facing forward)', 'info');
        log('3ï¸âƒ£ Click "Start Camera" and allow permissions', 'info');
        log('4ï¸âƒ£ Enter API key above', 'info');
        log('5ï¸âƒ£ Click "START AUTONOMOUS MODE"', 'info');
        log('', 'info');
        log('ğŸ® Manual control available with arrow keys when AI is off', 'info');
        log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
    </script>
</body>
</html>
